$(document).ready(function(){function n(){callWebMethod(page_Url+"/LoadUsers",{},function(n){var t=$.parseJSON(n.d);t.ErrorMessage!=""?alertDanger(t.ErrorMessage):$("#tbl_Users").empty().append($("#tmpl_User").render(t.DataTable))})}$(document).on("click",".btn-delete",function(){var t=$(this).data("id");bsConfirm("Necessaria conferma","Sei sicuro di voler eliminare questo utente?",function(){callWebMethod(page_Url+"/DeleteUser",{UserId:t},function(t){t.d!=""?alertDanger(t.d):n()})})});$(document).on("click",".btn-attach",function(){var n=$(this).data("id");callWebMethod(page_Url+"/LoadPrjForUser",{UserId:n},function(t){var i=$.parseJSON(t.d);i.ErrorMessage!=""?alertDanger(i.ErrorMessage):BootstrapDialog.show({title:"ASSEGNAZIONE PROGETTI",message:function(){var t=$("<div>");return $.each(i.DataTable,function(i,r){t.append('<p><input type="checkbox" class="prj" data-codice="'+r.CODICE+'" data-userid="'+n+'" '+(r.UserId!=null?"checked":"")+"> "+r.DESCRIZIONE+"<\/p>")}),t},onshown:function(n){$(n.getModalDialog()).on("change","input.prj",function(){var n=$(this).data("codice"),t=$(this).data("userid"),i=$(this).prop("checked");callWebMethod(page_Url+"/AssignPrjToUser",{CODICE:n,UserId:t,Assign:i},function(n){n.d!=""&&alertDanger(n.d)})})},draggable:!0,buttons:[{label:"Chiudi",action:function(n){n.close()}}]})})});$("#btnCreateFakeUser").click(function(){BootstrapDialog.show({title:"CREAZIONE UTENTE FAKE",size:BootstrapDialog.SIZE_SMALL,message:function(){return $('<div class="row"><div class="form-group form-group-sm col-sm-12">   <label>USER NAME<\/label><input type="text" id="FakeUserName" class="form-control"/><\/div><\/div><div class="row"><div class="form-group form-group-sm col-sm-12">   <label>EMAIL<\/label><input type="text" id="FakeUserEmail"  class="form-control"/><\/div><\/div ><div class="row"><div class="form-group form-group-sm col-sm-12">   <label>PASSWORD<\/label><input type="text" id="FakeUserPassword"  class="form-control"/><\/div><\/div >')},buttons:[{label:"Crea",cssClass:"btn-primary",action:function(n){n.close();callWebMethod(page_Url+"/RegisterFakeUser",{userName:$("#FakeUserName").val(),userPwd:$("#FakeUserPassword").val(),userEmail:$("#FakeUserEmail").val()},function(n){n.d==""?BootstrapDialog.show({message:'<div class="alert alert-success alert-white rounded" role="alert">   <div class="icon" style="float: left;"><i class="fa fa-check"><\/i><\/div>   <p>Grazie per aver effettuato la registrazione.<\/p>   <p>Per ragioni di sicurezza viene richiesta la convalida dell\'indirizzo email specificato.<\/p>   <p>Entro i prossimi 10 minuti (solitamente è istantaneo) riceverà una email con le istruzioni per attivare la Sua utenza.<\/p><\/div >'}):alertDanger(n.d)})}},{label:"Chiudi",action:function(n){n.close()}}]})});n()});