/*! Copyright (c) 2013 Elton Jain
 *
 * Version: 0.1
 * 
 * Requires: jQuery 1.7.2 or higher
 */
$.fn.draggable=function(n){var i=this,t;n=$.extend({handle:"",cursor:"move",axis:null,containParent:!1},n);t=n.handle===""?i:i.find(n.handle);return t.css("cursor",n.cursor).on("mousedown",function(i){var r=n.handle===""?$(this).addClass("draggable"):$(this).addClass("active-handle").parent().addClass("draggable");var l=r.css("z-index"),f=r.outerHeight(),e=r.outerWidth(),a=r.offset().top+f-i.pageY,v=r.offset().left+e-i.pageX,u=$(this).parent(),y=u.width(),p=u.height(),o=parseInt(u.offset().left)+parseInt(u.css("padding-left").replace("px","")),h=o+y,s=parseInt(u.offset().top)+parseInt(u.css("padding-top").replace("px","")),c=s+p;r.css("z-index",1e3).parents().on("mousemove",function(i){var u=i.pageY+a-f,y=i.pageX+v-e,p=null;n.containParent===!0&&(y<o&&(y=o),y>h-e&&(y=h-e),u<s&&(u=s),u>c-f&&(u=c-f));p=n.axis=="x"?{left:y}:n.axis=="y"?{top:u}:{left:y,top:u};$(".draggable").offset(p);$(".draggable, html").on("mouseup",function(){r.parents().off("mousemove");$(t).removeClass("draggable").css("z-index",l)})});i.preventDefault()}).on("mouseup",function(){n.handle===""?$(this).removeClass("draggable"):$(this).removeClass("active-handle").parent().removeClass("draggable");t.off("mousedown",function(n){n.preventDefault()})})};