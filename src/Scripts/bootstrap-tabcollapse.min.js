!function(n){"use strict";var t=function(t,i){this.options=i;this.$tabs=n(t);this._accordionVisible=!1;this._initAccordion();this._checkStateOnResize();var r=this;setTimeout(function(){r.checkState()},0)};t.DEFAULTS={accordionClass:"visible-xs",tabsClass:"hidden-xs",accordionTemplate:function(n,t,i,r){return'<div class="panel panel-default">   <div class="panel-heading">      <h4 class="panel-title">      <\/h4>   <\/div>   <div id="'+t+'" class="panel-collapse collapse '+(r?"in":"")+'">       <div class="panel-body js-tabcollapse-panel-body">       <\/div>   <\/div><\/div>'}};t.prototype.checkState=function(){this.$tabs.is(":visible")&&this._accordionVisible?(this.showTabs(),this._accordionVisible=!1):this.$accordion.is(":visible")&&!this._accordionVisible&&(this.showAccordion(),this._accordionVisible=!0)};t.prototype.showTabs=function(){var u=this,t,i,r;this.$tabs.trigger(n.Event("show-tabs.bs.tabcollapse"));t=this.$accordion.find(".js-tabcollapse-panel-heading").detach();t.each(function(){var i=n(this),t=i.data("bs.tabcollapse.parentLi"),r=u._panelHeadingToTabHeading(i);t.removeClass("active");t.parent().hasClass("dropdown-menu")&&!t.siblings("li").hasClass("active")&&t.parent().parent().removeClass("active");r.hasClass("collapsed")?r.removeClass("collapsed"):(t.addClass("active"),t.parent().hasClass("dropdown-menu")&&t.parent().parent().addClass("active"));t.append(i)});n("li").hasClass("active")||n("li").first().addClass("active");i=this.$accordion.find(".js-tabcollapse-panel-body");i.each(function(){var t=n(this),i=t.data("bs.tabcollapse.tabpane");i.append(t.contents().detach())});this.$accordion.html("");this.options.updateLinks&&(r=this.getTabContentElement(),r.find('[data-toggle-was="tab"], [data-toggle-was="pill"]').each(function(){var t=n(this),i=t.attr("href").replace(/-collapse$/g,"");t.attr({"data-toggle":t.attr("data-toggle-was"),"data-toggle-was":"","data-parent":"",href:i})}));this.$tabs.trigger(n.Event("shown-tabs.bs.tabcollapse"))};t.prototype.getTabContentElement=function(){var t=n(this.options.tabContentSelector);return t.length===0&&(t=this.$tabs.siblings(".tab-content")),t};t.prototype.showAccordion=function(){var i,t,r,u;this.$tabs.trigger(n.Event("show-accordion.bs.tabcollapse"));i=this.$tabs.find('li:not(.dropdown) [data-toggle="tab"], li:not(.dropdown) [data-toggle="pill"]');t=this;i.each(function(){var i=n(this),r=i.parent();i.data("bs.tabcollapse.parentLi",r);t.$accordion.append(t._createAccordionGroup(t.$accordion.attr("id"),i.detach()))});this.options.updateLinks&&(r=this.$accordion.attr("id"),u=this.$accordion.find(".js-tabcollapse-panel-body"),u.find('[data-toggle="tab"], [data-toggle="pill"]').each(function(){var t=n(this),i=t.attr("href")+"-collapse";t.attr({"data-toggle-was":t.attr("data-toggle"),"data-toggle":"collapse","data-parent":"#"+r,href:i})}));this.$tabs.trigger(n.Event("shown-accordion.bs.tabcollapse"))};t.prototype._panelHeadingToTabHeading=function(n){var t=n.attr("href").replace(/-collapse$/g,"");return n.attr({"data-toggle":"tab",href:t,"data-parent":""}),n};t.prototype._tabHeadingToPanelHeading=function(n,t,i,r){return n.addClass("js-tabcollapse-panel-heading "+(r?"":"collapsed")),n.attr({"data-toggle":"collapse","data-parent":"#"+i,href:"#"+t}),n};t.prototype._checkStateOnResize=function(){var t=this;n(window).resize(function(){clearTimeout(t._resizeTimeout);t._resizeTimeout=setTimeout(function(){t.checkState()},100)})};t.prototype._initAccordion=function(){var i=function(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t=this.$tabs.attr("id"),r=(t?t:i())+"-accordion";this.$accordion=n('<div class="panel-group '+this.options.accordionClass+'" id="'+r+'"><\/div>');this.$tabs.after(this.$accordion);this.$tabs.addClass(this.options.tabsClass);this.getTabContentElement().addClass(this.options.tabsClass)};t.prototype._createAccordionGroup=function(t,i){var r=i.attr("data-target"),e=i.data("bs.tabcollapse.parentLi").is(".active");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var u=n(r),o=u.attr("id")+"-collapse",f=n(this.options.accordionTemplate(i,o,t,e));return f.find(".panel-heading > .panel-title").append(this._tabHeadingToPanelHeading(i,o,t,e)),f.find(".panel-body").append(u.contents().detach()).data("bs.tabcollapse.tabpane",u),f};n.fn.tabCollapse=function(i){return this.each(function(){var r=n(this),u=r.data("bs.tabcollapse"),f=n.extend({},t.DEFAULTS,r.data(),typeof i=="object"&&i);u||r.data("bs.tabcollapse",new t(this,f))})};n.fn.tabCollapse.Constructor=t}(window.jQuery);